<!-- Side Menu Component -->
<div class="side-menu" id="sideMenu">
  <div class="menu-header">
    <h2>Film Manager Pro</h2>
    <div id="userInfo">
      <p id="userName">👤 Загрузка...</p>
      <p id="userEmail"></p>
    </div>
  </div>

  <a href="index.html" class="menu-item">
    <span>🏠 Главная</span>
  </a>
  <a href="clients.html" class="menu-item">
    <span>👥 Клиенты</span>
  </a>
  <a href="statistics.html" class="menu-item">
    <span>📊 Статистика</span>
  </a>
  <a href="settings.html" class="menu-item">
    <span>⚙️ Настройки</span>
  </a>

  <div class="menu-divider"></div>

  <a href="about.html" class="menu-item">
    <span>📱 О приложении</span>
  </a>
  <a href="#" class="menu-item" id="logoutBtn">
    <span>🚪 Выйти</span>
  </a>
</div>

<!-- Overlay for closing the menu -->
<div class="menu-overlay" id="menuOverlay" onclick="toggleMenu()"></div>

<script>
  // This script will be evaluated by the parent page
  (function() {
    // Import the authContext - this is already available in the parent page
    const updateSidebar = () => {
      if (window.authContext) {
        const authContext = window.authContext;
        
        authContext.subscribe(({ user }) => {
          const userName = document.getElementById('userName');
          const userEmail = document.getElementById('userEmail');
          
          if (user) {
            // Display user info
            userName.textContent = `👤 ${user.displayName || 'Пользователь'}`;
            userEmail.textContent = user.email || '';
          } else {
            // Reset to default
            userName.textContent = '👤 Не авторизован';
            userEmail.textContent = '';
          }
        });
        
        // Set up logout button
        document.getElementById('logoutBtn').addEventListener('click', async function(e) {
          e.preventDefault();
          
          try {
            // Sign out
            await authContext.signOut();
            // Redirect to login page
            window.location.href = 'login.html';
          } catch (error) {
            console.error('Error signing out:', error);
          }
        });
      }
    };
    
    // Run the update function
    updateSidebar();
  })();
</script> 